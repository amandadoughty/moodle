{"version":3,"sources":["../src/replayevents.js"],"names":["define","str","mdlcfg","notification","templates","$","countedEvents","canResend","canNotResend","selectorChanged","labelResendButton","labelConfirmTitle","labelConfirmContent","loadHTML","replayHTML","doneHTML","failedHTML","SELECTORS","CHECKBOXES","CHECKBOX_DATEFROM","CHECKBOX_DATETO","FORM","PAGE_LINKS","REPLAY_EVENTS","SELECTS","SELECT_CONTEXT","SELECT_ERRORTYPE","SELECT_EVENTNAME","SELECT_RESPONSE","SELECT_DATAFROM","SELECT_DATATO","SEND_BUTTON","SEND_CAN_DO","SEND_ID","SUBMIT_FORM","REPLAY_EVENT_ID_PREFIX","init","counts","notResend","Resend","val","registerOnChangeSelectEvents","updateResend","registerResendEvent","addReplyEvents","length","generateLoadHTML","generateDoneHTML","generateFailedHTML","generateReplayHTML","registerReplyEventListeners","self","click","e","stopPropagation","preventDefault","disableFormControls","disablePagination","element","off","addClass","id","attr","eventId","replace","doReplayEvent","url","wwwroot","historical","empty","append","removeClass","ajax","type","data","M","cfg","sesskey","success","enableFormControls","enablePagination","fail","ex","exception","change","disableResend","get_strings","key","component","param","count","done","s","confirm","submit","resend","html","enableResend","disableElements","elements","prop","enableElements","removeAttr","bind","unbind","disableReplyEvents","enableReplyEvents","disableFormSubmit","enableFormSubmit","disableFormSelects","enableFormSelects","is","disableFormCheckboxes","enableFormCheckboxes","loadStr","doneStr","failedStr","replayStr"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/*\n * @package    logstore_xapi\n * @copyright  2020 Learning Pool Ltd <http://learningpool.com>\n * @author     Záborski László <laszlo.zaborski@learningpool.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['core/str', 'core/config', 'core/notification', 'core/templates', 'jquery', 'jqueryui'],\n    function(str, mdlcfg, notification, templates, $) {\n\n        /**\n         * Store a sum.\n         */\n        var countedEvents = 0;\n\n        /**\n         * Store allowed resend state.\n         */\n        var canResend;\n\n        /**\n         * Store restrict resend state.\n         */\n        var canNotResend;\n\n        /**\n         * Selector changed.\n         */\n        var selectorChanged = false;\n\n        /**\n         * Name of resend button.\n         */\n        var labelResendButton = 'resendevents';\n\n        /**\n         * Title of confirmation window.\n         */\n        var labelConfirmTitle = 'confirmresendeventsheader';\n\n        /**\n         * Content of confirmation window.\n         */\n        var labelConfirmContent = 'confirmresendevents';\n\n        /**\n         * Store load HTML snippet.\n         */\n        var loadHTML = '';\n\n        /**\n         * Store replay HTML snippet.\n         */\n        var replayHTML = '';\n\n        /**\n         * Store done HTML snippet.\n         */\n        var doneHTML = '';\n\n        /**\n         * Store failed HTML snippet.\n         */\n        var failedHTML = '';\n\n        /**\n         * Store jquery selectors.\n         */\n        var SELECTORS = {\n            CHECKBOXES: '#xapierrorlog_form .form-check-input',\n            CHECKBOX_DATEFROM: '#xapierrorlog_form #id_datefrom_enabled',\n            CHECKBOX_DATETO: '#xapierrorlog_form #id_dateto_enabled',\n            FORM: '#xapierrorlog_form .mform',\n            PAGE_LINKS: '.pagination .page-item .page-link',\n            REPLAY_EVENTS: '#xapierrorlog_data .reply-event',\n            SELECTS: '#xapierrorlog_form .custom-select',\n            SELECT_CONTEXT: '#xapierrorlog_form #id_eventcontext',\n            SELECT_ERRORTYPE: '#xapierrorlog_form #id_errortype',\n            SELECT_EVENTNAME: '#xapierrorlog_form #id_eventnames',\n            SELECT_RESPONSE: '#xapierrorlog_form #id_response',\n            SELECT_DATAFROM: '#xapierrorlog_form #id_datefrom .custom-select',\n            SELECT_DATATO: '#xapierrorlog_form #id_dateto .custom-select',\n            SEND_BUTTON: '#xapierrorlog_form #id_resendselected',\n            SEND_CAN_DO: '#xapierrorlog_form input[name^=\"resend\"]',\n            SEND_ID: '#xapierrorlog_form input[name^=\"id\"]',\n            SUBMIT_FORM: '#xapierrorlog_form #id_submitbutton',\n        };\n\n        /**\n         * Added prefix to the replay event id.\n         */\n        var REPLAY_EVENT_ID_PREFIX = 'reply-event-id-';\n\n        var replayevents = {\n\n            /**\n             * Initialisation method called by php js_call_amd()\n             */\n            init: function(counts, notResend, Resend) {\n                countedEvents = counts;\n                canNotResend = notResend;\n                canResend = Resend;\n\n                // Set resend variable always to not allowed state.\n                $(SELECTORS.SEND_CAN_DO).val(canNotResend);\n\n                // Set labels.\n                if ($(SELECTORS.SEND_ID).val() == 1) {\n                    labelConfirmTitle = 'confirmsendeventsheader';\n                    labelConfirmContent = 'confirmsendevents';\n                    labelResendButton = 'sendevents';\n                }\n\n                this.registerOnChangeSelectEvents();\n                this.updateResend();\n                this.registerResendEvent();\n\n                this.addReplyEvents();\n             },\n\n            /**\n             * Register reply an individual event listeners.\n             */\n            addReplyEvents: function() {\n                if($(SELECTORS.REPLAY_EVENTS).length==0) {\n                    return;\n                }\n                this.generateLoadHTML();\n                this.generateDoneHTML();\n                this.generateFailedHTML();\n                this.generateReplayHTML();\n                this.registerReplyEventListeners();\n            },\n\n            /**\n             * Register reply an individual event listeners.\n             */\n            registerReplyEventListeners: function() {\n                var self = this;\n\n                $(SELECTORS.REPLAY_EVENTS).click(function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n\n                    self.disableFormControls();\n                    self.disablePagination();\n\n                    var element = $(this);\n\n                    element.off('click');\n                    element.addClass('disabled');\n\n                    var id = element.attr('id');\n                    var eventId = id.replace(REPLAY_EVENT_ID_PREFIX, '');\n\n                    self.doReplayEvent(eventId);\n                });\n            },\n\n            /**\n             * Replay an individual event using ajax.\n             */\n            doReplayEvent: function(eventId) {\n                var url = mdlcfg.wwwroot + '/admin/tool/log/store/xapi/ajax/moveback_to_log.php';\n                var eventIds = [eventId];\n                var self = this;\n                var element = $('#' + REPLAY_EVENT_ID_PREFIX + eventId);\n                var historical = $(SELECTORS.SEND_ID).val();\n\n                element.empty();\n                element.append(loadHTML);\n                element.removeClass('reply-event');\n\n                $.ajax({\n                    type: \"POST\",\n                    url: url,\n                    data: {\n                        'events': eventIds,\n                        'historical': historical,\n                        'sesskey': M.cfg.sesskey\n                    },\n                    success: function(data) {\n                        element.empty();\n\n                        if (data.success) {\n                            element.append(doneHTML);\n                            countedEvents--;\n                            self.updateResend();\n                        } else {\n                            element.append(failedHTML);\n                        }\n                        self.enableFormControls();\n                        self.enablePagination();\n                    },\n                    fail: function(ex) {\n                        notification.exception(ex);\n\n                        element.empty();\n                        element.append(failedHTML);\n                        self.enableFormControls();\n                        self.enablePagination();\n                    }\n                });\n            },\n\n            /**\n             * Disable resend event when select has been changed.\n             */\n            registerOnChangeSelectEvents: function(){\n                var self = this;\n\n                $(SELECTORS.SELECTS).change(function() {\n                    selectorChanged = true;\n                    self.disableResend();\n                });\n            },\n\n            /**\n             * Register click on resend button.\n             */\n            registerResendEvent: function(){\n                var self = this;\n\n                if (selectorChanged) {\n                    return;\n                }\n\n                $(SELECTORS.SEND_BUTTON).click(function() {\n                    self.disableFormControls();\n                    self.disablePagination();\n\n                    str.get_strings([\n                        {\n                            key: labelConfirmTitle,\n                            component: 'logstore_xapi'\n                        },\n                        {\n                            key: labelConfirmContent,\n                            component: 'logstore_xapi',\n                            param: {\n                                count: countedEvents\n                            }\n                        },\n                        {\n                            key: 'yes',\n                            component: 'moodle'\n                        },\n                        {\n                            key: 'no',\n                            component: 'moodle'\n                        }\n                    ]).done(function(s) {\n                        notification.confirm(s[0], s[1], s[2], s[3],\n                            function() {\n                                $(SELECTORS.SEND_CAN_DO).val(canResend);\n                                self.enableFormControls();\n                                $(SELECTORS.FORM).submit();\n                            },\n                            function() {\n                                self.enableFormControls();\n                                self.enablePagination();\n                            }\n                        );\n                    });\n                });\n            },\n\n            /**\n             * Update Send/Resend button label.\n             */\n            updateResend: function() {\n                var element = $(SELECTORS.SEND_BUTTON);\n                var self = this;\n\n                str.get_strings([\n                    {\n                        key: labelResendButton,\n                        component: 'logstore_xapi',\n                        param: {\n                            count: countedEvents\n                        }\n                    }\n                ]).done(function(resend) {\n                    element.attr('Value', countedEvents);\n                    element.html(resend);\n\n                    if (countedEvents != 0 && selectorChanged === false) {\n                        self.enableResend();\n                    }\n                });\n            },\n\n            /**\n             * Disable given elements.\n             */\n            disableElements: function(elements) {\n                elements.addClass(\"disabled\");\n                elements.attr(\"disabled\", \"disabled\");\n                elements.prop('disabled', true);\n            },\n\n            /**\n             * Enable given elements.\n             */\n            enableElements: function(elements) {\n                elements.removeClass(\"disabled\");\n                elements.prop('disabled', false);\n                elements.removeAttr(\"disabled\");\n            },\n\n            /**\n             * Disable page links.\n             */\n            disablePagination: function() {\n                if ($(SELECTORS.PAGE_LINKS).length == 0) {\n                    return;\n                }\n\n                var elements = $(SELECTORS.PAGE_LINKS);\n\n                this.disableElements(elements);\n                elements.bind('click', function(e){\n                    e.preventDefault();\n                });\n            },\n\n            /**\n             * Enable page links.\n             */\n            enablePagination: function() {\n                if ($(SELECTORS.PAGE_LINKS).length == 0) {\n                    return;\n                }\n                var elements = $(SELECTORS.PAGE_LINKS);\n\n                this.enableElements(elements);\n                elements.unbind('click');\n            },\n\n            /**\n             * Disable Resend button.\n             */\n            disableResend: function() {\n                this.disableElements($(SELECTORS.SEND_BUTTON));\n            },\n\n            /**\n             * Enable Resend button.\n             */\n            enableResend: function() {\n                this.enableElements($(SELECTORS.SEND_BUTTON));\n            },\n\n            /**\n             * Disable submit form control.\n             */\n            disableReplyEvents: function() {\n                $(SELECTORS.REPLAY_EVENTS).off('click');\n                this.disableElements($(SELECTORS.REPLAY_EVENTS));\n            },\n\n            /**\n             * Enable submit form control.\n             */\n            enableReplyEvents: function() {\n                this.enableElements($(SELECTORS.REPLAY_EVENTS));\n                this.registerReplyEventListeners();\n            },\n\n            /**\n             * Disable submit form control.\n             */\n            disableFormSubmit: function() {\n                this.disableElements($(SELECTORS.SUBMIT_FORM));\n            },\n\n            /**\n             * Enable submit form control.\n             */\n            enableFormSubmit: function() {\n                this.enableElements($(SELECTORS.SUBMIT_FORM));\n            },\n\n            /**\n             * Disable form selects.\n             */\n            disableFormSelects: function() {\n                this.disableElements($(SELECTORS.SELECTS));\n            },\n\n            /**\n             * Enable form selects.\n             */\n            enableFormSelects: function() {\n                this.enableElements($(SELECTORS.SELECT_ERRORTYPE));\n                this.enableElements($(SELECTORS.SELECT_EVENTNAME));\n                this.enableElements($(SELECTORS.SELECT_RESPONSE));\n                this.enableElements($(SELECTORS.SELECT_CONTEXT));\n\n                if ($(SELECTORS.CHECKBOX_DATEFROM).is(':checked')) {\n                    this.enableElements($(SELECTORS.SELECT_DATAFROM));\n                }\n\n                if ($(SELECTORS.CHECKBOX_DATETO).is(':checked')) {\n                    this.enableElements($(SELECTORS.SELECT_DATATO));\n                }\n            },\n\n            /**\n             * Disable form checkboxes.\n             */\n            disableFormCheckboxes: function() {\n                this.disableElements($(SELECTORS.CHECKBOXES));\n            },\n\n            /**\n             * Enable form checkboxes.\n             */\n            enableFormCheckboxes: function() {\n                this.enableElements($(SELECTORS.CHECKBOXES));\n            },\n\n            /**\n             * Disable form controls.\n             */\n            disableFormControls: function() {\n                this.disableFormSubmit();\n                this.disableFormCheckboxes();\n                this.disableFormSelects();\n                this.disableResend();\n            },\n\n            /**\n             * Disable form controls.\n             */\n            enableFormControls: function() {\n                this.enableFormCheckboxes();\n                this.enableFormSelects();\n                this.enableFormSubmit();\n                this.enableResend();\n            },\n\n            /**\n             * Generate load icon.\n             */\n            generateLoadHTML: function(){\n                str.get_strings([\n                    {\n                        key: 'loadinghelp',\n                        component: 'moodle'\n                    }\n                ]).done(function(loadStr) {\n                    loadHTML = '<span aria-hidden=\"true\"' +\n                        ' class=\"fa fa-spinner fa-spin fa-pulse\"' +\n                        ' title=\"' + loadStr + '\"></span>' +\n                        '<span class=\"sr-only\">' + loadStr + '</span>';\n                });\n            },\n\n            /**\n             * Generate done icon.\n             */\n            generateDoneHTML: function(){\n                str.get_strings([\n                    {\n                        key: 'success',\n                        component: 'moodle'\n                    }\n                ]).done(function(doneStr) {\n                    doneHTML = '<span aria-hidden=\"true\"' +\n                        ' class=\"fa fa-check\"' +\n                        ' title=\"' + doneStr + '\"></span>' +\n                        '<span class=\"sr-only\">' + doneStr + '</span>';\n                });\n            },\n\n            /**\n             * Generate failed icon.\n             */\n            generateFailedHTML: function(){\n                str.get_strings([\n                    {\n                        key: 'failed',\n                        component: 'logstore_xapi'\n                    }\n                ]).done(function(failedStr) {\n                    failedHTML = '<span aria-hidden=\"true\"' +\n                        ' class=\"fa fa-remove\"' +\n                        ' title=\"' + failedStr + '\"></span>' +\n                        '<span class=\"sr-only\">' + failedStr + '</span>';\n                });\n            },\n\n            /**\n             * Generate replay icon.\n             */\n            generateReplayHTML: function(){\n                str.get_strings([\n                    {\n                        key: 'replayevent',\n                        component: 'logstore_xapi'\n                    }\n                ]).done(function(replayStr) {\n                    replayHTML = '<span aria-hidden=\"true\"' +\n                        ' class=\"fa fa-repeat\"' +\n                        ' title=\"' + replayStr + '\"></span>' +\n                        '<span class=\"sr-only\">' + replayStr +' </span>';\n                    $(SELECTORS.REPLAY_EVENTS).append(replayHTML);\n                });\n            },\n        };\n\n        return replayevents;\n});\n\n"],"file":"replayevents.min.js"}