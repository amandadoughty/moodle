define(["jquery","core/ajax","core/config","core/notification"],function(a,b,c,d){var e,f={TOGGLELINK:"a#format_culcourse_toggledashboard",DASHBOARD:"#format_culcourse_dashboard"},g=c.wwwroot+"/course/format/culcourse/dashboard/getuserprefdashtoggle.php",h=c.wwwroot+"/course/format/culcourse/dashboard/setuserprefdashtoggle.php",i=function(b){if(b.stopPropagation(),a(this).is(b.target)){var c={courseid:e,value:!0},d={type:"POST",dataType:"json",data:c};a.ajax(h,d)}},j=function(b){if(b.stopPropagation(),a(this).is(b.target)){var c={courseid:e,value:!1},d={type:"POST",dataType:"json",data:c};a.ajax(h,d)}};return{init:function(b){e=b;var c=a("body");c.delegate(f.DASHBOARD,"hide.bs.collapse",j),c.delegate(f.DASHBOARD,"show.bs.collapse",i);var h={courseid:b};a.post(g,h,function(){}).done(function(b){b||(a(f.DASHBOARD).addClass("collapsed"),a(f.DASHBOARD).removeClass("show"))}).fail(function(a,b,c){d.exception(c)})}}});