{"version":3,"sources":["../src/updatebaseclass.js"],"names":["define","$","config","Notification","SELECTORS","UPDATEBUTTON","BASECLASSSELECT","ANCESTOR","FORM","URL","wwwroot","init","ancestor","closest","action","attr","on","baseclass","val","post","fail","jqXHR","status","error","exception","trigger"],"mappings":"AA4BAA,OAAM,oCAAC,CAAC,QAAD,CAAW,aAAX,CAA0B,mBAA1B,CAAD,CAAiD,SAASC,CAAT,CAAYC,CAAZ,CAAoBC,CAApB,CAAkC,IAMjFC,CAAAA,CAAS,CAAG,CACZC,YAAY,CAAE,wBADF,CAEZC,eAAe,CAAE,eAFL,CAGZC,QAAQ,CAAE,UAHE,CAIZC,IAAI,CAAE,YAJM,CANqE,CAajFC,CAAG,CAAGP,CAAM,CAACQ,OAAP,CAAiB,2CAb0D,CAerF,MAA6D,CAKzDC,IAAI,CAAG,eAAW,IACVC,CAAAA,CAAQ,CAAGX,CAAC,CAACG,CAAS,CAACE,eAAX,CAAD,CAA6BO,OAA7B,CAAqCT,CAAS,CAACG,QAA/C,CADD,CAEVO,CAAM,CAAGb,CAAC,CAACG,CAAS,CAACI,IAAX,CAAD,CAAkBO,IAAlB,CAAuB,QAAvB,CAFC,CAIdd,CAAC,CAACG,CAAS,CAACE,eAAX,CAAD,CAA6BU,EAA7B,CAAgC,QAAhC,CAA0C,UAAW,IAC7CC,CAAAA,CAAS,CAAGhB,CAAC,CAACG,CAAS,CAACE,eAAX,CAAD,CAA6BY,GAA7B,EADiC,CAQjDjB,CAAC,CAACkB,IAAF,CAAOV,CAAP,CALa,CACTQ,SAAS,CAAEA,CADF,CAKb,CAAoB,UAAW,CAAE,CAAjC,EACKG,IADL,CACU,SAASC,CAAT,CAAgBC,CAAhB,CAAwBC,CAAxB,CAA+B,CACjCpB,CAAY,CAACqB,SAAb,CAAuBD,CAAvB,CACH,CAHL,EAKAtB,CAAC,CAACG,CAAS,CAACI,IAAX,CAAD,CAAkBO,IAAlB,CAAuB,QAAvB,CAAiCD,CAAM,CAAG,GAAT,CAAeF,CAAQ,CAACG,IAAT,CAAc,IAAd,CAAhD,EACAd,CAAC,CAACG,CAAS,CAACC,YAAX,CAAD,CAA0BoB,OAA1B,CAAkC,OAAlC,CACH,CAfD,CAgBH,CAzBwD,CA2BhE,CA1CK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Helper functions for CUL Course Format\n *\n * @package    course/format\n * @subpackage cul\n * @copyright  2016 Amanda Doughty <amanda.doughty.1@city.ac.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\n\n/**\n  * @module format_culcourse/updatebaseclass\n  */\ndefine(['jquery', 'core/config', 'core/notification'], function($, config, Notification) {\n\n     /**\n      * Used CSS selectors\n      * @access private\n      */\n    var SELECTORS = {\n        UPDATEBUTTON: '#id_updatecourseformat',\n        BASECLASSSELECT: '#id_baseclass',\n        ANCESTOR: 'fieldset',\n        FORM: 'form.mform'\n        };\n\n    var URL = config.wwwroot + '/course/format/culcourse/setbaseclass.php';\n\n    return /** @alias module:format_culcourse/updatebaseclass */ {\n        /**\n         * Update the baseclass.\n         * @access public\n         */\n        init : function() {\n            var ancestor = $(SELECTORS.BASECLASSSELECT).closest(SELECTORS.ANCESTOR);\n            var action = $(SELECTORS.FORM).attr('action');\n\n            $(SELECTORS.BASECLASSSELECT).on('change', function() {\n                var baseclass = $(SELECTORS.BASECLASSSELECT).val();\n\n                var params = {\n                    baseclass: baseclass\n                    // sesskey: M.cfg.sesskey\n                };\n\n                $.post(URL, params, function() {})\n                    .fail(function(jqXHR, status, error) {\n                        Notification.exception(error);\n                    });\n\n                $(SELECTORS.FORM).attr('action', action + '#' + ancestor.attr('id'));\n                $(SELECTORS.UPDATEBUTTON).trigger('click');\n            });\n        }\n    };\n});"],"file":"updatebaseclass.min.js"}