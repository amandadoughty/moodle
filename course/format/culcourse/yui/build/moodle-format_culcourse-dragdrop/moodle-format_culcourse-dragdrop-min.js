YUI.add("moodle-format_culcourse-dragdrop",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)},r={BLOCK:"dash-panel",QUICKLINK:"quick",DASHLINK:"dash",QUICKLINKDRAGGABLE:"quicklinkdraggable",QUICKLINKCONTAINER:"course-content",MOVE:"dash-move",ICONCLASS:"iconsmall"},i={QUICKLINK:".dash.quick",QUICKLINKCONTAINER:".links.quicklinks",ACTIVITYLINK:".dash.activity",ACTIVITYLINKCONTAINER:".links.activitylinks",MOVE:".dash-move",DASHLINK:".dash",QUICKLINKDRAGGABLE:".quicklinkdraggable"};e.extend(n,M.core.dragdrop,{initializer:function(){this.groups=[r.QUICKLINKDRAGGABLE],this.quicklinklistselector=i.QUICKLINK,this.setup_for_quicklink(this.quicklinklistselector);var t=new e.DD.Delegate({container:i.QUICKLINKCONTAINER,nodes:i.QUICKLINKDRAGGABLE,target:!0,handles:[i.MOVE],dragConfig:{groups:this.groups}});t.dd.plug(e.Plugin.DDProxy,{moveOnEnd:!1,cloneNode:!0}),t.dd.plug(e.Plugin.DDConstrained,{constrain:i.QUICKLINKCONTAINER}),t.dd.plug(e.Plugin.DDWinScroll);var n=e.Node.one(i.QUICKLINKCONTAINER),s=new e.DD.Drop({groups:this.groups,node:n})},setup_for_quicklink:function(t){e.Node.all(t).each(function(t){var n=t.getData("draggroups");n||(t.setAttribute("data-draggroups",this.groups.join(" ")),new e.DD.Drop({node:t,groups:this.groups,padding:"20 0 20 0"}));var s=t.one("a"+i.MOVE);s&&s.replace(this.get_drag_handle(M.util.get_string("movecoursemodule","moodle"),r.MOVE,r.ICONCLASS,!0))},this)},drag_start:function(e){var t=e.target;t.get("node").addClass("drag_target_active"),t.get("dragNode").set("innerHTML",t.get("node").get("innerHTML")),t.get("dragNode").addClass("drag_item_active"),t.get("dragNode").setStyles({borderColor:t.get("node").getStyle("borderColor"),backgroundColor:t.get("node").getStyle("backgroundColor")})},drag_dropmiss:function(e){this.drop_hit(e)},drop_over:function(e){var t=e.drag.get("node"),n=e.drop.get("node");n.hasClass(r.QUICKLINK)&&(e.drop.get("node").get("parentNode").insertBefore(t,n),e.drop.sizeShim())},drop_hit:function(e){var t=e.drop.get("node"),n=e.drag.get("node");t.hasClass(r.QUICKLINK)||t.appendChild(n)}},{NAME:"format_culcourse_dragdrop"}),M.format_culcourse=M.format_culcourse||{},M.format_culcourse.init_dragdrop=function(){new n}},"@VERSION@",{requires:["base","node","io","dom","dd","dd-scroll","moodle-core-dragdrop","moodle-core-notification","moodle-course-coursebase","moodle-course-util"]});
