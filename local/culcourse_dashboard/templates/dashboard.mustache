{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_culcourse_dashboard/dashboard

    Links panel containing quick links and activity links.

    Classes required for JS:
    * quicklinks, activitylinks

    Data attributes required for JS:
    
    Context variables required for this template:
    * see local/culcourse_dashboard/classes/output/dashboard.php

}}
{{# cancelquicklink}}
    {{> local_culcourse_dashboard/cancelquicklink}}
{{/ cancelquicklink}}

{{# cancelactivitylink}}
    {{> local_culcourse_dashboard/cancelactivitylink}}
{{/ cancelactivitylink}}

{{#userisediting}}
<p class="local_culcourse_dashboard togglewrap">
  <button id="local_culcourse_dashboard_toggledashboard" class="btn btn-primary" type="button" data-toggle="collapse" data-target="#local_culcourse_dashboard_dashboard" aria-expanded="false" aria-controls="local_culcourse_dashboard_dashboard">
    {{# str}} toggledashboard, local_culcourse_dashboard {{/ str}}
  </button>
</p>
<div class="collapse show" id="local_culcourse_dashboard_dashboard">    
{{/userisediting}}
    <div id="local_culcourse_dashboard" class="d-flex flex-wrap align-items-stretch position-relative">

        {{# quicklinksexist}}
        <div 
            class="local_culcourse_dashboard dash-panel quicklinks-wrap col-12 col-md-6 p-4"
            data-draggroups="quicklinkdraggable"
            data-position="start">
            <h2 class="mb-3">Quick Links</h2>
            <nav class="linkscontainer">
                <ul 
                class="quicklinks links d-flex flex-wrap "
                >
                    {{# quicklinks}}
                    {{> local_culcourse_dashboard/quicklink}}
                    {{/ quicklinks}}
                    {{#ismovingquicklink}}
                        {{> local_culcourse_dashboard/lastquicklinkposition}}
                    {{/ismovingquicklink}}
                    <div class="viewmorelink flex-wrap align-items-stretch col-xs-6 col-sm-4 col-xl-3 p-1">
                        <a href="javascript:void(0);" class="viewmore-inner d-flex flex-wrap flex-column align-items-center justify-content-center w-100 text-white">
                            <div class="viewmore-text text-center">
                                <div class="h2 text-white mb-0">
                                    <i class="fa fa-plus"></i>
                                </div>
                                {{#str}}viewmore, local_culcourse_dashboard{{/str}}
                            </div>
                            <div class="viewless-text text-center">
                                <div class="h2 text-white mb-0">
                                    <i class="fa fa-minus"></i>
                                </div>
                                {{#str}}viewless, local_culcourse_dashboard{{/str}}
                            </div>
                        </a>
                    </div>
                </ul>
            </nav>
        </div>
        {{/ quicklinksexist}}

        {{# activitiesexist}}
        <div 
            class="local_culcourse_dashboard dash-panel activities-wrap col-12 col-md-6 p-4"
            data-draggroups="activitylinkdraggable"
            data-position="start">
            <h2 class="mb-3">Activities</h2>
            <nav class="linkscontainer">
                <ul 
                class="activitylinks links d-flex flex-wrap"
                >
                    {{# activities}}
                    {{> local_culcourse_dashboard/activity}}
                    {{/ activities}}
                    {{#ismovingactivitylink}}
                        {{> local_culcourse_dashboard/lastactivityposition}}
                    {{/ismovingactivitylink}}
                    <div class="viewmorelink flex-wrap align-items-stretch col-xs-6 col-sm-4 col-xl-3 p-1">
                        <a href="javascript:void(0);" class="viewmore-inner d-flex flex-wrap flex-column align-items-center justify-content-center w-100 text-white">
                            <div class="viewmore-text text-center">
                                <div class="h2 text-white mb-0">
                                    <i class="fa fa-plus"></i>
                                </div>
                                {{#str}}viewmore, local_culcourse_dashboard{{/str}}
                            </div>
                            <div class="viewless-text text-center">
                                <div class="h2 text-white mb-0">
                                    <i class="fa fa-minus"></i>
                                </div>
                                {{#str}}viewless, local_culcourse_dashboard{{/str}}
                            </div>
                        </a>
                    </div>
                </ul>
            </nav>
        </div>
        {{/ activitiesexist}}
    </div>
{{#userisediting}}    
</div>
{{/userisediting}}

{{#userisediting}}
{{#js}}
    require(['local_culcourse_dashboard/quicklinks'], function(quicklinkmanager) {
        quicklinkmanager.init('{{adminurl}}');
    });
    require(['local_culcourse_dashboard/dashtoggle'], function(dashtoggle) {
        dashtoggle.init('{{courseid}}');
    });
{{/js}}
{{/userisediting}}

{{^userisediting}}
{{#js}}
    require(['local_culcourse_dashboard/dashpanel'], function(dashpanel) {
        dashpanel.init();
    });
{{/js}}
{{/userisediting}}