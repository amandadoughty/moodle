!function(){var a=function(a){return M.cfg.wwwroot+"/pluginfile.php/"+M.cfg.contextid+"/theme_cass/"+a};require.config({enforceDefine:!1,paths:{"theme_cass/TweenMax":["https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min",a("vendorjs/TweenMax.min")]},shim:{"theme_cass/TweenMax":{exports:"TweenMax"}}})}(),define(["jquery","core/ajax","theme_cass/breadcrumb","theme_cass/TweenMax"],function(a,b,c,d){return new function(){var e=this,f=function(b){a(b).show().animate({right:"20px",opacity:1},1e3)},g=function(b){a(b).animate({right:"-600px",opacity:.5},200,function(){a(b).hide()})},h=function(){f("#activitycompletemodal")},i=function(){a(".next_activity_overlay").fadeTo("slow",0,function(){a(this).hide()});var b=a("#alertBox"),c=a("#darkBackground");d.to(c,0,{display:"block"}),d.to(c,.3,{background:"rgba(0,0,0,0.4)",force3D:!0}),d.to(b,0,{left:"calc(50% - 150px)",top:"calc(50% - 150px)",delay:"0.2"}),d.to(b,0,{display:"block",opacity:1,delay:"0.2"}),d.to(b,0,{display:"block",scale:.2,opacity:0,delay:"0.2"}),d.to(b,.3,{opacity:1,force3D:!0,delay:"0.2"}),d.to(b,.3,{scale:1,force3D:!0,delay:"0.2"}),d.to(c,.2,{backgroundColor:"rgba(0,0,0,0)",force3D:!0,delay:"2"}),d.to(c,.2,{display:"none",force3D:!0,delay:"2"}),d.to(b,.2,{opacity:0,display:"none",force3D:!0,delay:"2",onComplete:h})};this.addPopCompletion=function(a){if("undefined"!=typeof M.themeCass.settings.nextactivitymodaldialogdelay){var b=["page","book","wiki","feedback"];b.indexOf(a.modname)===-1&&setTimeout(function(){i()},M.themeCass.settings.nextactivitymodaldialogdelay)}},this.init=function(d,f){M.themeCass=d,M.themeCass.settings&&M.themeCass.settings.fixheadertotopofpage&&a("body").append('<span style="display:none" class="notloggedin"></span>'),c.init();var h=function(){a(".hsuforum-discussion, .hsuforum-reply").submit(function(){setTimeout(function(){j()},3e3)})},j=function(){var b="completion";try{a.ajax({type:"GET",async:!0,url:M.cfg.wwwroot+"/theme/cass/rest.php?action=get_"+b+"&contextid="+f.contextid,success:function(b){a(".completion-region").attr("data-content-loaded","1"),a(".completion-region").html(b.html),e.addPopCompletion(f)}})}catch(c){window.console.error(c)}h()},k=function(a){b.call([{methodname:"theme_snap_course_module_completion",args:{id:a,completionstate:1},done:function(){i()},fail:function(a){window.console.error(a)}}],!0,!0)},l=function(){a('[data-toggle="collapse"]').on("click",function(){a(this).find("span.glyphicon").toggleClass("glyphicon-chevron-down glyphicon-chevron-up")}),a(".completeclick").on("click",function(b){b.preventDefault(),k(a(this).data("cmid"))}),a(".completeclose").on("click",function(a){g("#activitycompletemodal"),a.preventDefault()}),"undefined"!==f&&null!==f&&"hsuforum"===f.modname&&h()};l()}}});