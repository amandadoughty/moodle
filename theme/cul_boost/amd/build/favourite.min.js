define ("theme_cul_boost/favourite",["jquery","core/ajax","core/templates","core/notification","core/str","core/url","core/yui","core/pubsub","core_course/events","block_myoverview/main","block_starredcourses/main"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=null,m=function(b){b.preventDefault();var c=b.target.get("href").split("?"),d=c[0],f=c[1];g.use("node","querystring-parse","json-parse",function(){g.io(M.cfg.wwwroot+"/theme/cul_boost/favourite_ajax.php",{method:"POST",context:this,data:f,on:{success:function success(a,b){var c=g.JSON.parse(b.responseText),e=l.one("a"),h=d+"?"+f.replace(c.action,c.newaction);e.setAttribute("data-content",c.text);e.toggleClass("favourited");e.set("href",h)},end:function end(){g.fire("culcourse-listing:update-favourites");var b=a(".block_myoverview .block-myoverview");a.each(b,function(a,b){j.init(b)});b=a(".block_starredcourses .block-starredcourses");a.each(b,function(a,b){k.init(b)})}}})})};return{init:function init(){if(g.one("#theme-cul_boost-removefromfavourites")){l=g.one("#theme-cul_boost-removefromfavourites");l.on("click",m,this)}else if(g.one("#theme-cul_boost-addtofavourites")){l=g.one("#theme-cul_boost-addtofavourites");l.on("click",m,this)}g.publish("culcourse-listing:update-favourites",{broadcast:2})}}});
//# sourceMappingURL=favourite.min.js.map
