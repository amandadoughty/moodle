define(["jquery","core/ajax","core/templates","core/notification","core/str","core/url","core/yui","core/pubsub","core_course/events"],function(e,o,n,t,r,u,c,i,s){"use strict";function a(){c.use("node",function(){c.io(M.cfg.wwwroot+"/theme/cul_boost/favourites_ajax.php",{on:{success:function(e,o){var n=c.one("li#theme-cul_boost-myfavourites"),t=c.JSON.parse(o.responseText),r=c.Node.create(t);n&&n.remove(),c.one(".navbar .nav-wrap .nav:nth-of-type(2)").prepend(r)}}})})}return{init:function(){c.use("node",function(){c.Global.on("culcourse-listing:update-favourites",a)}),i.subscribe(s.favourited,function(){a()}),i.subscribe(s.unfavorited,function(){a()})}}});