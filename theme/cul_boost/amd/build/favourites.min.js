define(["jquery","core/ajax","core/templates","core/notification","core/str","core/url","core/yui","core/pubsub","core_course/events"],function(e,o,n,t,r,u,i,c,s){"use strict";function a(){i.use("node",function(){i.io(M.cfg.wwwroot+"/theme/cul_boost/favourites_ajax.php",{on:{success:function(e,o){var n=i.one("#theme-cul_boost-myfavourites"),t=i.JSON.parse(o.responseText),r=i.Node.create(t),u=i.one(".navbar .nav-wrap"),c=u.one(".nav-item:nth-of-type(2)");n&&n.remove(),u.insert(r,c)}}})})}return{init:function(){i.use("node",function(){i.Global.on("culcourse-listing:update-favourites",a)}),c.subscribe(s.favourited,function(){a()}),c.subscribe(s.unfavorited,function(){a()})}}});