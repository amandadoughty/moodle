define(["jquery","core/ajax","core/templates","core/notification","core/str","core/url","core/yui","core/pubsub","core_course/events"],function(e,o,n,t,r,u,s,c,i){"use strict";function a(){s.use("node",function(){s.io(M.cfg.wwwroot+"/theme/cul_boost/favourites_ajax.php",{on:{success:function(e,o){var n=s.one("#theme_cul_boost_myfavourites"),t=s.JSON.parse(o.responseText),r=s.Node.create(t),u=s.one(".navbar .nav-wrap"),c=u.one(".dropdown:nth-of-type(2)");console.log(c),n&&n.remove(),u.insert(r,c)}}})})}return{init:function(){s.use("node",function(){s.Global.on("culcourse-listing:update-favourites",a)}),c.subscribe(i.favourited,function(){a()}),c.subscribe(i.unfavorited,function(){a()})}}});