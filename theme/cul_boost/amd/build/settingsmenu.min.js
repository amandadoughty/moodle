define(["jquery","core/log"],function(d,e){return{init:function(){var t=d("#block-region-nav-settings");d("a.trigger").on("click",function(){t.addClass("show"),d(".overlay").addClass("show"),d("body").addClass("overflow-hidden"),1!=t.parents(".right-navbar").hasClass("stick")&&d("html, body").animate({scrollTop:t.offset().top},0)}),d(".overlay").on("click",function(){t.removeClass("show"),d(this).removeClass("show"),d("body").removeClass("overflow-hidden")}),d(document).keyup(function(e){27==e.keyCode&&(t.removeClass("show"),d(".overlay").removeClass("show"),d("body").removeClass("overflow-hidden"))}),d(document).ajaxComplete(function(e,t,i){var a,n,s=d(".tree_item.branch"),o=d(".block_tree.list"),r=o.outerWidth(),l=s.siblings("ul");function c(e){var t=e.hasClass("root_node"),i=e.siblings("ul").find(".tree_item.branch"),a=e.parent().siblings(),n=2*e.parents("li.contains_branch").length;"true"==e.attr("aria-expanded")&&(n-=2),i.attr("aria-expanded","false"),i.siblings("ul").attr("aria-hidden","true"),a.find(".tree_item.branch").attr("aria-expanded","false"),a.find(".tree_item.branch").siblings("ul").attr("aria-hidden","true"),1!=t?o.css("width","calc("+r+"px + "+n+"rem"):o.css("width",r)}s.on("click",function(){c(d(this)),o.animate({scrollTop:0},0)}),d("a.trigger").on("click",function(){c(s),o.css("width",r),o.animate({scrollTop:0},0)}),n=0,(a=l).each(function(){n=d(this).height()>n?d(this).height():n}),a.height(n)})}}});