define(["jquery","core/log"],function(c,e){return{init:function(){var t=c("#block-region-nav-settings");c("a.trigger").on("click",function(){t.addClass("show"),c(".overlay").addClass("show"),c("body").addClass("overflow-hidden"),1!=t.parents(".right-navbar").hasClass("stick")&&c("html, body").animate({scrollTop:t.offset().top},500)}),c(".overlay").on("click",function(){t.removeClass("show"),c(this).removeClass("show"),c("body").removeClass("overflow-hidden")}),c(document).keyup(function(e){27==e.keyCode&&(t.removeClass("show"),c(".overlay").removeClass("show"),c("body").removeClass("overflow-hidden"))}),c(document).ajaxComplete(function(e,t,a){var i,n,o=c(".tree_item.branch"),s=c(".block_tree.list"),r=s.outerWidth(),l=o.siblings("ul");o.on("click",function(){var e,t,a,i,n;e=c(this),t=e.hasClass("root_node"),a=e.siblings("ul").find(".tree_item.branch"),i=e.parent().siblings(),n=2*e.parents("li.contains_branch").length,"true"==e.attr("aria-expanded")&&(n-=2),a.attr("aria-expanded","false"),a.siblings("ul").attr("aria-hidden","true"),i.find(".tree_item.branch").attr("aria-expanded","false"),i.find(".tree_item.branch").siblings("ul").attr("aria-hidden","true"),1!=t?s.css("width","calc("+r+"px + "+n+"rem"):s.css("width",r),s.animate({scrollTop:0},0)}),c("a.trigger").on("click",function(){s.animate({scrollTop:0},0)}),n=0,(i=l).each(function(){n=c(this).outerHeight()>n?c(this).height():n}),i.height(n),s.height(n)})}}});