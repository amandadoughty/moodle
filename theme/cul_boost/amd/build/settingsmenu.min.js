define(["jquery","core/log"],function(d,e){return{init:function(){var h=d("#block-region-nav-settings");d("a.trigger").on("click",function(){h.addClass("show"),d(".overlay").addClass("show"),d("body").addClass("overflow-hidden"),1!=h.parents(".right-navbar").hasClass("stick")&&d("html, body").animate({scrollTop:h.offset().top},500)}),d(".overlay").on("click",function(){h.removeClass("show"),d(this).removeClass("show"),d("body").removeClass("overflow-hidden")}),d(document).keyup(function(e){27==e.keyCode&&(h.removeClass("show"),d(".overlay").removeClass("show"),d("body").removeClass("overflow-hidden"))}),d(document).ajaxComplete(function(e,s,a){var o,t,i=d(".tree_item.branch"),n=d(".block_tree.list"),r=n.outerWidth(),l=i.siblings("ul");i.on("click",function(){var e,s,a,o,t;e=d(this),s=e.hasClass("root_node"),a=e.siblings("ul").find(".tree_item.branch"),o=e.parent().siblings(),t=2*e.parents("li.contains_branch").length,"true"==e.attr("aria-expanded")&&(t-=2),a.attr("aria-expanded","false"),a.siblings("ul").attr("aria-hidden","true"),o.find(".tree_item.branch").attr("aria-expanded","false"),o.find(".tree_item.branch").siblings("ul").attr("aria-hidden","true"),1!=s?n.css("width","calc("+r+"px + "+t+"rem"):n.css("width",r),n.animate({scrollTop:0},0)}),d("a.trigger").on("click",function(){d(this).hasClass("open")?(d(this).removeClass("open"),h.removeClass("show"),d(".overlay").removeClass("show"),d("body").removeClass("overflow-hidden")):d(this).addClass("open"),n.animate({scrollTop:0},0)}),t=0,(o=l).each(function(){t=d(this).outerHeight()>t?d(this).height():t}),o.height(t),n.height(t)})}}});