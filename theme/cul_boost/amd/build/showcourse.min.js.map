{"version":3,"sources":["../src/showcourse.js"],"names":["define","$","ajax","config","notification","str","SELECTORS","SHOWCOURSE","H1MODULEHIDDEN","URL","wwwroot","courseId","handleShow","data","cid","sesskey","type","dataType","done","result","remove","confirmHandleShow","message","onconfirm","get_strings","key","s","confirm","init","courseid","body","delegate","e","preventDefault","component"],"mappings":"AA2BAA,OAAM,8BAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,aAAxB,CAAuC,mBAAvC,CAA4D,UAA5D,CAAD,CAA0E,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAA0BC,CAA1B,CAAwCC,CAAxC,CAA6C,IAMrHC,CAAAA,CAAS,CAAG,CACZC,UAAU,CAAE,kBADA,CAEZC,cAAc,CAAE,gBAFJ,CANyG,CAWrHC,CAAG,CAAGN,CAAM,CAACO,OAAP,CAAiB,kCAX8F,CAYrHC,CAZqH,CAqBrHC,CAAU,CAAG,UAAW,IACpBC,CAAAA,CAAI,CAAG,CACPC,GAAG,CAAEH,CADE,CAEPI,OAAO,CAAEZ,CAAM,CAACY,OAFT,CADa,CAYxBd,CAAC,CAACC,IAAF,CAAOO,CAAP,CANe,CACXO,IAAI,CAAE,MADK,CAEXC,QAAQ,CAAE,MAFC,CAGXJ,IAAI,CAAEA,CAHK,CAMf,EAAsBK,IAAtB,CAA2B,SAASC,CAAT,CAAiB,CACxC,GAAIA,CAAM,QAAV,CAAuB,CACnBlB,CAAC,CAACK,CAAS,CAACE,cAAX,CAAD,CAA4BY,MAA5B,EACH,CACJ,CAJD,CAKH,CAtCwH,CA8CrHC,CAAiB,CAAG,SAASC,CAAT,CAAkBC,CAAlB,CAA6B,CACjDlB,CAAG,CAACmB,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAE,SAAN,CADY,CAEZ,CAACA,GAAG,CAAE,KAAN,CAFY,CAGZ,CAACA,GAAG,CAAE,IAAN,CAHY,CAAhB,EAIGP,IAJH,CAIQ,SAASQ,CAAT,CAAY,CACZtB,CAAY,CAACuB,OAAb,CAAqBD,CAAC,CAAC,CAAD,CAAtB,CAA2BJ,CAA3B,CAAoCI,CAAC,CAAC,CAAD,CAArC,CAA0CA,CAAC,CAAC,CAAD,CAA3C,CAAgDH,CAAhD,CACH,CANL,CAQH,CAvDwH,CAyDzH,MAAgD,CAM5CK,IAAI,CAAG,cAASC,CAAT,CAAmB,CACtBlB,CAAQ,CAAGkB,CAAX,CACA,GAAIC,CAAAA,CAAI,CAAG7B,CAAC,CAAC,MAAD,CAAZ,CAEA6B,CAAI,CAACC,QAAL,CAAczB,CAAS,CAACC,UAAxB,CAAoC,gBAApC,CAAsD,SAASyB,CAAT,CAAY,CAC9DA,CAAC,CAACC,cAAF,GAEA5B,CAAG,CAACmB,WAAJ,CAAgB,CACZ,CAACC,GAAG,CAAE,mBAAN,CAA2BS,SAAS,CAAE,iBAAtC,CADY,CAAhB,EAEGhB,IAFH,CAEQ,SAASQ,CAAT,CAAY,CACZL,CAAiB,CAACK,CAAC,CAAC,CAAD,CAAF,CAAO,UAAW,CAC/Bd,CAAU,EACb,CAFgB,CAGpB,CANL,CAQH,CAXD,CAYH,CAtB2C,CAwBnD,CAjFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Show course function.\n *\n * @package    theme_cul_boost\n * @copyright  2018 Amanda Doughty <amanda.doughty.1@city.ac.uk>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n *\n */\n\n/**\n * @module theme_cul_boost/showcourse\n */\ndefine(['jquery', 'core/ajax', 'core/config', 'core/notification', 'core/str'], function($, ajax, config, notification, str) {\n\n     /**\n      * Used CSS selectors\n      * @access private\n      */\n    var SELECTORS = {\n        SHOWCOURSE: '.showcourse .btn',\n        H1MODULEHIDDEN: '.module-hidden',\n        };\n\n    var URL = config.wwwroot + '/theme/cul_boost/unhide_ajax.php';\n    var courseId;\n\n    /**\n     * Makes course visible.\n     *\n     * @access private\n     * @method handleClose\n     * @param {event} e\n     */\n    var handleShow = function() {\n        var data = {\n            cid: courseId,\n            sesskey: config.sesskey,\n        };\n\n        var settings = {\n            type: 'POST',\n            dataType: 'json',\n            data: data\n        };\n\n        $.ajax(URL, settings).done(function(result) {\n            if (result['updated']) {\n                $(SELECTORS.H1MODULEHIDDEN).remove();\n            }             \n        });\n    };\n\n    /**\n     * Displays the show confirmation to make course visible.\n     *\n     * @param {String} message confirmation message\n     * @param {function} onconfirm function to execute on confirm\n     */\n    var confirmHandleShow = function(message, onconfirm) {\n        str.get_strings([\n            {key: 'confirm'},\n            {key: 'yes'},\n            {key: 'no'}\n        ]).done(function(s) {\n                notification.confirm(s[0], message, s[1], s[2], onconfirm);\n            }\n        );\n    };\n\n    return /** @alias theme_cul_boost/showcourse */ {\n        /**\n         * Initialize showcoursemanager\n         * @access public\n         * @param {int} courseid\n         */\n        init : function(courseid) {\n            courseId = courseid;\n            var body = $('body');\n\n            body.delegate(SELECTORS.SHOWCOURSE, 'click keypress', function(e) {\n                e.preventDefault();\n \n                str.get_strings([\n                    {key: 'confirmshowcourse', component: 'theme_cul_boost'}\n                ]).done(function(s) {\n                        confirmHandleShow(s[0], function() {\n                            handleShow();\n                        });\n                    }\n                );\n            });            \n        }\n    };\n});"],"file":"showcourse.min.js"}