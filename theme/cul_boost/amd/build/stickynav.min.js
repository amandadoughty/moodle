define(["jquery","core/log"],function(w,e){return{init:function(){w(".right-navbar").each(function(){var v=w(this);w('<div id="navbar-anchor"></div>').insertBefore(v);w(window).scrollTop();function e(){var e,i,n=v.outerWidth(),o=v.outerHeight(),r=w(window).scrollTop(),t=w(".nav-wrap"),a=t.outerHeight(),s=w("#settingsnav+.footer").outerHeight(),c=w("#navbar-anchor").offset().top,h="";function l(){t.hasClass("reveal")?(c=w("#navbar-anchor").offset().top-a,h=" fixed"):v.removeClass("fixed")}l(),e=w(".block_tree.list"),i=w(window).innerHeight()-(o+20)-s,t.hasClass("reveal")&&(i=w(window).innerHeight()-(o+a+20)-s),e.css("max-height",i);var d=w(window).scrollTop();l(),c<r?(v.addClass("stick"+h),w("#navbar-anchor").css({height:o,width:n})):(v.removeClass("stick"+h),w("#navbar-anchor").css("height","0"))}e(),w(window).scroll(e),w(window).resize(function(){e()})})}}});