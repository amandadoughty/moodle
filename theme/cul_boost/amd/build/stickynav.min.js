define(["jquery","core/log"],function(v,n){return{init:function(){v(".right-navbar").each(function(){var l=v(this);v('<div id="navbar-anchor"></div>').insertBefore(l);v(window).scrollTop();function n(){var n=l.outerWidth(),o=l.outerHeight(),i=v(window).scrollTop(),e=v(".nav-wrap"),r=e.outerHeight(),t=v("#settingsnav+.footer").outerHeight(),a=v("#navbar-anchor").offset().top,s="";function c(){e.hasClass("reveal")?(a=v("#navbar-anchor").offset().top-r,s=" fixed"):l.removeClass("fixed")}c(),function(){var n=v(".block_tree.list"),i=v(window).innerHeight()-(o+20)-t;e.hasClass("reveal")&&(i=v(window).innerHeight()-(o+r+20)-t);n.css("max-height",i)}();var h=v(window).scrollTop();c(),h,a<i?(l.addClass("stick"+s),v("#navbar-anchor").css({height:o,width:n})):(l.removeClass("stick"+s),v("#navbar-anchor").css("height","0"))}n(),v(window).scroll(n),v(window).resize(function(){n()})})}}});