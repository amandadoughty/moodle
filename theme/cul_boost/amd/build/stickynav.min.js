define(["jquery","core/log"],function(v,i){return{init:function(){v(".right-navbar").each(function(){var l=v(this);v('<div id="navbar-anchor"></div>').insertBefore(l);v(window).scrollTop();function i(){var i=l.outerWidth(),o=l.outerHeight(),n=v(window).scrollTop(),e=v(".nav-wrap"),r=e.outerHeight(),t=v("#settingsnav+.footer").outerHeight(),a=v("#navbar-anchor").offset().top,s="";function c(){e.hasClass("reveal")?(a=v("#navbar-anchor").offset().top-r,s=" fixed"):l.removeClass("fixed")}c(),function(){var i=v(".block_tree.list"),n=v(window).innerHeight()-(o+20)-t;if(e.hasClass("reveal"))n=v(window).innerHeight()-(o+r+20)-t;i.css("max-height",n)}();var h=v(window).scrollTop();c(),h,a<n?(l.addClass("stick"+s),v("#navbar-anchor").css({height:o,width:i})):(l.removeClass("stick"+s),v("#navbar-anchor").css("height","0"))}i(),v(window).scroll(i),v(window).resize(function(){i()})})}}});