YUI.add("moodle-theme_cul_boost-favourite",function(e,t){M.theme_cul_boost=M.theme_cul_boost||{},M.theme_cul_boost.favourite={editlink:null,init:function(){e.one("#theme-cul_boost-removefromfavourites")?(this.editlink=e.one("#theme-cul_boost-removefromfavourites"),this.editlink.on("click",this.editfavourite,this)):e.one("#theme-cul_boost-addtofavourites")&&(this.editlink=e.one("#theme-cul_boost-addtofavourites"),this.editlink.on("click",this.editfavourite,this)),e.publish("culcourse-listing:update-favourites",{broadcast:2})},editfavourite:function(t){t.preventDefault();var n=t.target.get("href").split("?"),r=n[0],i=n[1];e.io(M.cfg.wwwroot+"/theme/cul_boost/favourite_ajax.php",{method:"POST",context:this,data:i,on:{success:function(t,n){data=e.JSON.parse(n.responseText);var s=this.editlink.one("a"),o=r+"?"+i.replace(data.action,data.newaction);s.setAttribute("data-content",data.text),s.toggleClass("favourited"),s.set("href",o)},end:function(){e.fire("culcourse-listing:update-favourites")}}})}}},"@VERSION@",{requires:["node","querystring-parse","json-parse"]});
