YUI.add("moodle-theme_cul_boost-favourite",function(e,t){M.theme_cul_boost=M.theme_cul_boost||{},M.theme_cul_boost.favourite={editlink:null,init:function(){e.one("#theme-cul_boost-removefromfavourites")?(this.editlink=e.one("#theme-cul_boost-removefromfavourites"),this.editlink.on("click",this.editfavourite,this)):e.one("#theme-cul_boost-addtofavourites")&&(this.editlink=e.one("#theme-cul_boost-addtofavourites"),this.editlink.on("click",this.editfavourite,this)),e.publish("culcourse-listing:update-favourites",{broadcast:2})},editfavourite:function(t){t.preventDefault();var n=t.target.get("href").split("?"),r=this.editlink.id;console.log(r);var i=n[0],s=n[1];e.io(M.cfg.wwwroot+"/theme/cul_boost/favourite_ajax.php",{method:"POST",context:this,data:s,on:{success:function(t,n){data=e.JSON.parse(n.responseText);var r=this.editlink.one("a"),o=i+"?"+s.replace(data.action,data.newaction);r.set("href",o),r.set("innerHTML",data.text),r.set("title",data.text)},end:function(){e.fire("culcourse-listing:update-favourites")}}})}}},"@VERSION@",{requires:["node","querystring-parse","json-parse"]});
